{% extends "layout.njk" %}
{% import "parts/card.njk" as card %}

{% block content %}

{% call card.render("Editar Produto", "container form") %}

    <form method="POST" action="/products?_method=PUT" enctype="multipart/form-data">
        
        <div class="fields">

            {% include 'products/fields.njk' %}
            <input type="hidden" name="id" value="{{ product.id }}">
        
        </div>
        
        <button class="button edit" type="submit">Atualizar</button>

    </form>

    <form class="form-delete" method="POST" action="/products?_method=DELETE">

        <input type="hidden" name="id" value="{{ product.id }}">
        <button class="button delete" type="submit">Deletar</button>

    </form>

{% endcall %}

    <script>

        const formDelete = document.querySelector('.form-delete');
        formDelete.addEventListener('submit', (event) => {
            const confirmation = confirm('Tem certeza que deseja deletar os Dados?');
            if (!confirmation) {
                event.preventDefault();
            };
        });

    </script>

{% endblock content %}